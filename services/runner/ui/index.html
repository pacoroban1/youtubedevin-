<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Amharic Recap Autopilot</title>
    <link rel="stylesheet" href="/ui/styles.css" />
    <script defer src="/ui/app.js"></script>
  </head>
  <body>
    <div class="bg">
      <div class="bg__grid"></div>
      <div class="bg__glow bg__glow--a"></div>
      <div class="bg__glow bg__glow--b"></div>
    </div>

    <header class="topbar">
      <div class="topbar__left">
        <div class="mark" aria-hidden="true">
          <div class="mark__dot"></div>
          <div class="mark__bar"></div>
        </div>
        <div>
          <div class="h1">Amharic Recap Autopilot</div>
          <div class="sub">Run the pipeline, verify engines, and inspect outputs.</div>
        </div>
      </div>

      <div class="topbar__right">
        <div class="pill" id="statusPill">
          <span class="pill__led" id="statusLed"></span>
          <span class="pill__text" id="statusText">Idle</span>
        </div>
        <button class="btn btn--ghost" id="btnRefresh" type="button">Refresh</button>
      </div>
    </header>

    <main class="shell">
      <section class="panel">
        <div class="panel__hd">
          <div>
            <div class="panel__title">Run</div>
            <div class="panel__hint">Pick a video ID or auto-select via Discover.</div>
          </div>
          <div class="panel__actions">
            <button class="btn btn--primary" id="btnFull" type="button">Full Pipeline</button>
            <button class="btn btn--ghost" id="btnCancelJob" type="button" disabled>Cancel Job</button>
          </div>
        </div>

        <div class="field">
          <label class="label" for="videoId">Video ID</label>
          <div class="row">
            <input class="input" id="videoId" placeholder="e.g. dQw4w9WgXcQ" autocomplete="off" />
            <button class="btn btn--soft" id="btnIngest" type="button">Ingest</button>
            <button class="btn btn--soft" id="btnScript" type="button">Script</button>
            <button class="btn btn--soft" id="btnVoice" type="button">Voice</button>
            <button class="btn btn--soft" id="btnRender" type="button">Render</button>
            <button class="btn btn--soft" id="btnThumb" type="button">Thumbnail</button>
            <button class="btn btn--soft" id="btnUpload" type="button">Upload</button>
          </div>
          <div class="help">
            Tip: the full pipeline will run ingest → script → voice → render → thumbnail → upload → distribute.
          </div>
        </div>

        <div class="split">
          <div class="card">
            <div class="card__hd">
              <div class="card__title">Discovery</div>
              <div class="card__meta">YouTube search + ranking</div>
            </div>
            <div class="card__bd">
              <button class="btn btn--primary" id="btnDiscover" type="button">Discover</button>
              <button class="btn btn--ghost" id="btnReport" type="button">Daily Report</button>
            </div>
          </div>

          <div class="card">
            <div class="card__hd">
              <div class="card__title">Engines</div>
              <div class="card__meta">Health + capability checks</div>
            </div>
            <div class="card__bd card__bd--stack">
              <div class="row row--wrap">
                <button class="btn btn--ghost" id="btnVerifyVoice" type="button">Verify Voice</button>
                <button class="btn btn--ghost" id="btnVerifyTranslate" type="button">Verify Translate</button>
                <button class="btn btn--ghost" id="btnVerifyZthumb" type="button">Verify ZThumb</button>
                <button class="btn btn--ghost" id="btnConfig" type="button">Config</button>
              </div>
              <div class="mini" id="engineNotes">
                Translation supports <span class="kbd">google</span> or <span class="kbd">libretranslate</span> providers.
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="panel">
        <div class="panel__hd">
          <div>
            <div class="panel__title">Output</div>
            <div class="panel__hint">Latest JSON response. Copy it into bug reports.</div>
          </div>
          <div class="panel__actions">
            <button class="btn btn--ghost" id="btnCopy" type="button">Copy JSON</button>
            <button class="btn btn--ghost" id="btnClear" type="button">Clear</button>
          </div>
        </div>

        <div class="jobs">
          <div class="jobs__hd">
            <div>
              <div class="jobs__title">Jobs</div>
              <div class="jobs__meta">Recent async runs. Click a job to inspect.</div>
            </div>
            <div class="jobs__actions">
              <button class="btn btn--ghost" id="btnJobsRefresh" type="button">Refresh Jobs</button>
            </div>
          </div>

          <div class="jobs__grid">
            <div class="jobs__list" id="jobsList">
              <div class="jobs__empty">No jobs yet.</div>
            </div>
            <div class="jobs__detail" id="jobDetail">
              <div class="jobdetail__empty" id="jobDetailEmpty">No job selected.</div>

              <div class="jobdetail" id="jobDetailBody" hidden>
                <div class="jobdetail__hd">
                  <div>
                    <div class="jobdetail__title" id="jobTitle">Job</div>
                    <div class="jobdetail__meta" id="jobMeta"></div>
                  </div>
                </div>

                <div class="bar">
                  <div class="bar__fill" id="jobBar"></div>
                </div>
                <div class="bar__meta">
                  <span class="bar__pct" id="jobPct">0%</span>
                  <span class="bar__hint" id="jobHint"></span>
                </div>

                <div class="steps" id="jobSteps"></div>

                <div class="events">
                  <div class="events__hd">
                    <div class="events__title">Events</div>
                    <div class="events__meta">Most recent first</div>
                  </div>
                  <div class="events__bd" id="jobEvents"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <pre class="json" id="jsonOut">{}</pre>

        <div class="logs">
          <div class="logs__hd">
            <div class="logs__title">Activity</div>
            <div class="logs__meta">Local UI log (not container logs)</div>
          </div>
          <div class="logs__bd" id="logOut"></div>
        </div>
      </section>
    </main>

    <footer class="foot">
      <div class="foot__left">
        <span class="muted">Runner:</span>
        <a class="link" href="http://localhost:8000" target="_blank" rel="noreferrer">http://localhost:8000</a>
        <span class="sep">•</span>
        <span class="muted">n8n:</span>
        <a class="link" href="http://localhost:5678" target="_blank" rel="noreferrer">http://localhost:5678</a>
      </div>
      <div class="foot__right">
        <span class="muted">UI served by runner</span>
      </div>
    </footer>
  </body>
</html>
